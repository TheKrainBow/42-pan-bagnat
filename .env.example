###############################################################################
# Core hostnames & cookies
###############################################################################
HOST_NAME=localhost                                   # Public hostname served by nginx (used for Swagger + redirects)

###############################################################################
# Nginx / TLS
###############################################################################
NGINX_FORCE_HTTPS=1                                   # Set to 1 to redirect HTTP traffic to HTTPS
NGINX_SSL_CERT=/etc/ssl/fullchain.pem                 # Mounted certificate chain used by nginx
NGINX_SSL_CERT_KEY=/etc/ssl/42nice.fr.key             # Mounted certificate key used by nginx
NGINX_SSL_DIR=./nginx/ssl                             # Host path containing TLS cert/key (mounted read-only)

###############################################################################
# Database (shared by backend, migrator, proxy services)
###############################################################################
POSTGRES_USER=
POSTGRES_PASSWORD=
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=panbagnat
POSTGRES_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}?sslmode=disable

###############################################################################
# Module repositories (mounted into backend)
###############################################################################
REPO_BASE_PATH=/data/repos                             # Path inside backend container
REPO_HOST_BASE_PATH="Path To /pan-bagnat/repos on the VM running it" # Host path where repos are cloned

###############################################################################
# 42 OAuth application
###############################################################################
FT_CLIENT_ID=
FT_CLIENT_SECRET=

###############################################################################
# Webhooks & Git access
###############################################################################
WEBHOOK_SECRET=
GIT_SSH_KNOWN_HOSTS=/app/known_hosts                   # Path (inside backend container) for aggregated known_hosts file
SSH_KNOWN_HOSTS_LIST=github.com,gitlab-world.42.fr,gitlab-world.42.fr:422,42born2git.42.fr,42born2git.42.fr:422  # Comma-separated host[:port] list to generate known_hosts

###############################################################################
# Module proxy & gateway system
###############################################################################
MODULES_SESSION_SECRET=                                # HMAC secret shared between backend and proxy-service

###############################################################################
# Optional overrides
###############################################################################
# SESSION_COOKIE_DOMAIN=.localhost                      # Scope session_id + pb_login_next cookies to this domain (*.localhost / *.panbagnat.42nice.fr)
# FT_CALLBACK_URL=https://${HOST_NAME}/auth/42/callback  # Must match the callback registered in the 42 intranet app
# MODULES_PROXY_ALLOWED_DOMAINS=modules.${HOST_NAME}     # Base domains accepted for module subdomains
# MODULES_IFRAME_ALLOWED_HOSTS=${HOST_NAME}              # Hosts allowed to embed module iframes
# MODULES_LOGIN_URL=https://${HOST_NAME}/login           # URL where proxy-service redirects unauthenticated browsers
# MODULES_NET_CONTROLLER_URL=http://net-controller:9091  # Where proxy-service queries gateway status
# MODULES_PROXY_PORT=9090                                # Internal port exposed by proxy-service
# MODULES_PROXY_CHANNEL=module_page_changed              # LISTEN/NOTIFY channel for module page changes
# MODULES_SESSION_COOKIE_TTL=1h                          # How long proxy-service cookies live (Go duration)
# MODULES_SESSION_TOKEN_TTL=1m                           # TTL for module session exchange tokens issued by backend
# MODULES_MODULES_PROTOCOL=                              # Force protocol for module URLs (blank=auto, http|https)
# PROXY_DEBUG_AUTH=0                                     # Set to 1 to log proxy auth decisions (0 to disable)
# MODULES_SHARED_NETWORK=pan-bagnat-proxy-net            # Docker network shared by proxy-service + gateways
# MODULES_GATEWAY_IMAGE=nginx:alpine                     # Image used for gateway-<slug> containers
# MODULES_GATEWAY_PORT=8080                              # Port exposed by each gateway container
